<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="rpglike.css" />
        <script src="rpglike.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=M+PLUS+2:wght@300&display=swap" rel="stylesheet">
        

        <script>
            (function(d) {
              var config = {
                kitId: 'dno5bbm',
                scriptTimeout: 3000,
                async: true
              },
              h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
            })(document);
        </script>
        
        <script>
            (function(d) {
              var config = {
                kitId: 'dno5bbm',
                scriptTimeout: 3000,
                async: true
              },
              h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
            })(document);
        </script>
        
        
        
        <!-- iOS用 -->
        <meta name="apple-mobile-web-app-capable" content="yes">

        <!-- Android用 -->
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">

    </head>
    <body>
        
        <div id="score_sheet" class = "score_sheet" style="display:none">
            <p id="delete_data_button_score" onclick="wantDelete()">dd</p>
            <ul id="clearScores">
                <!-- <li id="playerName" class="clear_font"></li> -->
                <svg id="playerNameSvg" class="clear_font" xmlns="http://www.w3.org/2000/svg">
                    <!-- グラデーションの定義 -->
                    <defs>
                        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:rgb(255,245,175);stop-opacity:1" />
                            <stop offset="100%" style="stop-color:rgb(255,233,77);stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <!-- 縁取りのある文字 -->
                    <text id="playerName" x="50%" y="90%">
                        Outlined Text
                    </text>
                </svg>
                <li id="gameScore" class="numContainer"></li>
                <li id="clearTime" class="numContainer" style="display: none;"></li>
            </ul>
        </div>
        <div id="delete_or_not"  style="display:none">
            <p>全てのセーブデータが消去されます。<br>また、このボタンは運営用でありゲームクリアに関係ありません。</p>
            <div class="flex_buttons">
                <p onclick="deleteAllData()" id="really_delete_button" class="flex_item_button">削除</p>
                <p onclick="notDelete()" id="not_delete_button" class="flex_item_button">戻る</p>
                <p onclick="debugMode()" id="debug_button" class="flex_item_button">デバッグ用</p>
            </div>
        </div>
        <div id="title_sheet" style="display:block">
            <img class="back_image_fit" src ='images/title/%E3%82%B2%E3%83%BC%E3%83%A0%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E7%94%BB%E9%9D%A2.webp'/>
            <div id="title_text_and_buttons" onclick="startGame()">
                <img src="images/title/%E3%82%B9%E3%82%BF%E3%83%BC%E3%83%88%E3%83%9C%E3%82%BF%E3%83%B3.webp" onclick="startGame()" id="start_button" class="title_button">
            </div>
            <img src="images/title/%E3%82%B2%E3%83%BC%E3%83%A0%E3%82%84%E3%82%81%E3%82%8B%E3%83%9C%E3%82%BF%E3%83%B3_%E6%9A%97.webp" onclick="quitGame()" id="quit_button" class="title_button">
            <p id="delete_data_button" onclick="wantDelete()">delete_data</p>
            
        </div>
        <div id="tutorial" style="display:none">
            <img src = 'images/background/%E8%8D%89%E5%8E%9F_%E6%88%A6%E9%97%98%E7%94%BB%E9%9D%A2.webp' id="story_sogen" class="back_image_fit" style="display:none"/>
            <div id="ending" style="display:none"></div>
            
            <img id="tutorial_image" src="">
            <img id="pointer" src ="images/icons/up_arrow.webp" style="display: none">
        </div>

        <div id="clear_back_sheet" style="display:none">
        </div>
        
        <div id="clear_sheet" style="display:none">
            <div id="clear_text_and_buttons">
                <button onclick="window.location.reload();" id="back_title">タイトルへ戻る</button>
                <!-- <button onclick="moveToScoreSheet()" id="move_to_score_sheet">スコア画面へ</button> -->
            </div>
            <div id="clear_pop_and_back">
                <div id="clear_pop_back" onclick="hideBack('clear_pop_and_back');"></div>
                <div id="clear_pop">
                    <p>ゲームをクリアしたことでレベルの上限が解放された！<br>残りの時間を使って経験値をさらに上げよう！</p>
                    <button id="close_clear_pop" onclick="hideBack('clear_pop_and_back');">閉じる</button>
                </div>
            </div>
        </div>


        <div id="name_form" style="display: none">
            <div id="name_container">
                <p>名前を入力してください</p>
                <input  type="text" id="name_box" value="ななし">
                <p id = "name_alert" style="display: none">名前は4文字以内にしてください</p>
                <p onclick="sendName()" class="checkButton" id="name_send_button">送信</p>
            </div>
        </div>

        <div id="write_name" style="display: none;">
            <input type="text" id="name_box">
        </div>
        
        
        
        
        <div id="text_log_back" style="display:none" onclick="displayNextDialog()">      
        </div>
        <div class="text_log" id="gene_text_log" style="display: none" onclick="displayNextDialog()">
            <p class="text_log_speaker">＊</p>
            <p class="text_log_sentence">文章が入るところ</p>
            <img src="images/icons/under_arrow.webp" alt="↓" class="text_log_next_button"> 
        </div>
        
        
        
        <div id="map" style="display:none">
            <div class="menu_button" onclick="openMenu()" id="menu_button">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <img id="quiz_select_icon" src = "images/icons/%E8%AC%8E%E9%81%B8%E6%8A%9E%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3.webp" style="display: none">
            <ul class="slide_menu">
                <li id = "timer">t</li>
                <li id="menu_level">Lv.主人公</li>
                <!--</1><li id="next_levet_made">次のレベルまで</li>-->
                <li style="display: flex">
                    <p id="menu_point">pt</p>
                    <progress value="0" max="100" id="menu_point_bar"></progress>
                </li>
                <li id="menu_explain" onclick="openExplain()">説明</li>
                <span id="menu_explain_box"  class="acodion_list" style="display: none">
                    <li id="menu_story_explain" class="menu_explains" onclick="openExplainSheet('世界観の説明')">　ストーリー設定</li>
                    <li id="menu_quiz_explain" class="menu_explains" onclick="openExplainSheet('謎画面の説明_1')">　謎画面について</li>
                    <li id="menu_battle_explain" class="menu_explains" onclick="openExplainSheet('戦闘画面の説明')">　戦闘画面について</li>
                </span>
                <li id="menu_monster" onclick="openBook('monster_book')">モンスター図鑑</li>
                <li id="menu_magic_list" onclick="openBook('magic_book')">魔法図鑑</li>
                <li id="menu_how_to_win" onclick="openMonsterHint()">倒し方のヒント</li>
                <span id="menu_monster_hint_box" style="display: none" class="acodion_list">
                    <li id="B1_hint" class="menu_explains" style="display: none" onclick="monster_hint('B1')">　ブルースライム</li>
                    <li id="B2_hint" class="menu_explains" style="display: none" onclick="monster_hint('B2')">　ガーゴイル</li>
                    <li id="B3_hint" class="menu_explains" style="display: none" onclick="monster_hint('B3')">　魔王Mr.魔王</li>
                </span>
                <li id="menu_title" onclick="moveTitle()" >タイトルに戻る</li>
                <li></li>
            </ul>
            <div id="menu_back" style="display:none" onclick="closeMenu()">
            </div>
            
            <div id="prairie" class="stage">
                <img class="back_image_cover" src ='images/background/%E8%8D%89%E5%8E%9F_%E4%BF%AF%E7%9E%B0%E5%9B%B3.webp'/>
                <div class="quiz_icons" id="prairie_q_icons">
                </div>
                <img src ="images/icons/%E7%9C%8B%E6%9D%BF%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3.webp" alt = "看板" onclick="openBoard()" id="board_icon">
                <img id='B1_icon' src="images/mobs/スライム.webp"onclick="openBattle('B1')" class="monster_icon">
                <img src="images/icons/up_arrow.webp" alt="↑" class="move_map_button" id="button_move_to_rocky" onclick="moveMap('rocky')" style="display: none">
            </div>
            
            <div id="rocky" class="stage" style="display: none">
                <img class="back_image_cover" src ='images/background/%E5%B2%A9%E5%A0%B4_%E4%BF%AF%E7%9E%B0%E5%9B%B3.webp'/>
                <div id="quiz_icons">
                </div>
                <img id='B2_icon' src="images/mobs/%E9%A3%9B%E3%81%B6.webp"onclick="openBattle('B2')" class="monster_icon">
                <img src="images/icons/up_arrow.webp" alt="↑" class="move_map_button" id="button_move_to_castle" onclick="moveMap('castle')" style="display: none">
                <img src="images/icons/under_arrow.webp" alt="↓" class="move_map_button" id="button_back_to_prairie" onclick="moveMap('prairie')">
            </div>
            
            <div id="castle" class="stage" style="display: none">
                <img id="castle_back_image"  src ='images/background/%E7%A5%AD%E5%A3%87_%E4%BF%AF%E7%9E%B0%E5%9B%B3.webp'>
                <div class="quiz_icons" id="castle_q_icons">
                    
                </div>
                <img id='B3_icon' src="images/mobs/%E9%AD%94%E7%8E%8B.webp"onclick="openBattle('B3')" class="monster_icon">
                <img src="images/icons/under_arrow.webp" alt="↓" class="move_map_button" id="button_back_to_rocky" onclick="moveMap('rocky')">
                
            </div>
            

            <div id="extra" class="stage" style="display: none">
                <img class="back_image_cover" src ='images/background/エクストラ背景.webp'/>
                <div class="quiz_icons" id="extra_q_icons">
                    
                </div>
                <img src="images/icons/under_arrow.webp" alt="↓" class="move_map_button" id="button_back_to_castle" onclick="moveMap('castle')">
            </div>


        </div>
        <script>
            // JavaScriptでクリックイベントを処理する
            document.querySelector('#castle_back_image').addEventListener('click', function(event) {
                // クリックされた位置を取得する
                const clickedX = event.clientX;
                const clickedY = event.clientY;
                
                // ここで特定の領域や条件を判定し、条件に応じた処理を実行する
                if (isInClickableArea(clickedX, clickedY)) {
                    // クリックした場所が特定の領域に該当する場合の処理
                    checkExtraEntrance();
                }
            });
        </script>
        
        
        
        <div id="QB_back" style="display:none">
        </div>
        <div id="Q_sheet" style="display:none">
            
            <div id="quiz_stars"></div>
            <div class="quiz_content">
                <img src="" alt="謎の画像" class="quiz_image">
                <div id="quiz_magic_judge_canvas" class="judge_canvas">
                </div>
            </div>
            <div class="text_log" id="q_text_log">
                <p class="text_log_sentence">答えを入力：</p>
                <input type="text" id="answer_box">
                <div id = "send_and_hint_buttons">
                    <p onclick="hint(0)" class="hintButton">ヒント</p>
                    <p onclick="hint(0,null,true)" class="magicHintButton">魔法のヒント</p>
                    <p onclick="checkA()" class="checkButton">送信</p>
                </div>
            </div>
            <div class="closeButtons">
                <p onclick="colorVision()" id="colorVisionButton" display="none">色がわかりにくい場合</p>
                <p onclick="closeQ()" class="closeButton">▷戻る</p>
            </div>
        </div>
        
        
        <div id="board_sheet" style="display: none">
            <div id="board_content">
                <img src="" alt="クリア条件の画像" id="board_image">
                <div id="board_magic_judge_canvas" class="judge_canvas">
                </div>
            </div>
            <div class="closeButtons">
                <p onclick="closeBoard()" class="closeButton">▷戻る</p>
            </div>
        </div>
        
        
        
        <div class="book_sheet" id="monster_book" style="display: none">
            <div class="book_content">
                <img src="images/book/book_image/monster/%E3%81%AB%E3%82%83%E3%81%92%E3%81%BC%E3%81%86%E3%81%97.webp" alt="モンスター" class="book_base_image" id="monster_book_image">
                <ul class="book_link_list" id="monster_book_link_list">
                </ul>
            </div>
            <div class="closeButtons">
                <p onclick="closeBook('monster_book')" class="closeButton">▷戻る</p>
            </div>
        </div>
        <!--<script>
            document.getElementById("monster_book").addEventListener("click", function(e) {
                makeBook(e);
            });
        </script>-->
        
        
        <div class="book_sheet" id="magic_book" style="display: none">
            <div class="book_content">
                <img src="images/book/book_image/magic/none.webp" alt="魔法の説明" class="book_base_image" id="magic_book_image">
                <ul class="book_link_list" id="magic_book_link_list">
                </ul>
            </div>
            <div class="closeButtons">
                <p onclick="closeBook('magic_book')" class="closeButton">▷戻る</p>
            </div>
        </div>
        
        
        <div id="explain_sheet" style="display: none">
            <div id="explain_content">
                <img src="" alt="説明" id="explain_image">
            </div>
            <div class="closeButtons">
                <p onclick="closeExplainSheet()" class="closeButton">▷戻る</p>
            </div>
        </div>
        
    
        
        <div id="open_color_back" style="display:none" onclick="closeColorMagic()">
        </div>
        
        <div id="magic_canvas" style="display: none">
        </div>
        <script>
            document.getElementById("magic_canvas").addEventListener("click", function(e) {
                useMagic(e);
            });
        </script>
        
        
        <div id="magics" style="display:none">
            
            <div id="change_color_icon" class="change_color magic_icon" onclick="openColorMagic()" style="display:none">
            </div>
            <ul class="color_menu change_color" style="display:none">
                <li class="red" onclick="openMagic('red')"></li>
                <li class="blue" onclick="openMagic('blue')"></li>
                <li class="yellow" onclick="openMagic('yellow')"></li>
            </ul>
            
            <div id="add_char_icon" class="add_char magic_icon" style="display:none" onclick="openMagic('add_char')">
            </div>
            

            <div id="change_char_icon" class="change_char magic_icon" onclick="openMagic('change_char')" style="display:none">
            </div>
    
            <div id="scissors_icon" class="scissors magic_icon" onclick="openMagic('scissors')" style="display:none">
            </div>  
        </div>
        
        
        <div id="pop_back" style="display:none" onclick="closePop()">      
        </div>
        <div id="pop"style="display:none">
            <div id= "pop_sheet_back" onclick="closePop()"></div>
            <p id="pop_title">popタイトル</p>
            <p id="pop_text">pop文章</p>
            <p id="pop_close" onclick="closePop()">×</p>
            <p id="pop_button" style="display: none" >ボタン</p>
            <dev id="hints_buttons">
                <p id="change_color_hint" class="magic_hint_buttons" style="display: none" onclick="hint(0,'change_color',true)">カラーの答え</p>
                <p id="add_char_hint" class="magic_hint_buttons" style="display: none" onclick="hint(0,'add_char',true)">スクエアの答え</p>
                <p id="change_char_hint" class="magic_hint_buttons" style="display: none" onclick="hint(0,'change_char',true)">文字トランスの答え</p>
                <p id="scissors_hint" class="magic_hint_buttons" style="display: none" onclick="hint(0,'scissors',true)">ハサミの答え</p>
                <p id="add_char1_hint" class="magic_hint_buttons" style="display: none" onclick="hint(0,'add_char1',true)">スクエアの答え1</p>
                <p id="add_char2_hint" class="magic_hint_buttons" style="display: none" onclick="hint(0,'add_char2',true)">スクエアの答え2</p>
            </dev>
            
        </div>
        
        
        
        
        
        
        
        
        
        
        
        <!--ここから所有格さん-->
        
        
        
        <div id="B1" class="battle" style="display: none" onclick="fail()">
            <img class="back_image_fit" src='images/background/%E8%8D%89%E5%8E%9F_%E6%88%A6%E9%97%98%E7%94%BB%E9%9D%A2.webp'/>
            <div class="enemy_info">
                <div class="enemy_name" id="B1_name" onclick="changeName(this.id)">ブルースライム</div>
                <div class="enemy_status">
                    <ul style="list-style-type: none;" onclick="fail()">
                        <li>Lv:5</li>
                        <li>HP:100</li>
                        <li>ATK:10</li>
                        <li>DEF:30</li>
                    </ul>
                </div>
            </div>
            <img src="images/mobs/%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%A0.webp" class="monster" id="monster1" onclick="changeColor(this.id)">
            <div class="command" id="B1_command">
                <p onclick="soonFail(1)">▷たたかう</p>
                <p onclick="openBattleMagic()">▷まほう</p>
                <p onclick="closeBattle('B1')">▷にげる</p>
            </div>
        </div>
        
        
        <div id="B2" class="battle" style="display: none" onclick="fail()">
            <img class="back_image_fit" src='images/background/%E5%B2%A9%E5%A0%B4_%E6%88%A6%E9%97%98%E7%94%BB%E9%9D%A2.webp'/>
            <img src="images/mobs/%E9%A3%9B%E3%81%B6.webp" class="monster" id="monster2" onclick="changeColor('monster2')">
            <img src="images/background/%E3%81%A4%E3%82%8A%E6%A9%8B.webp" id="tsuribashi">
            <div class="enemy_info">
                <div class="enemy_name" id="B2_name" onclick="changeName('B2')">ガーゴイル</div>
                <div class="enemy_status">
                    <ul style="list-style-type: none;">
                        <li>Lv:10</li>
                        <li>HP:300</li>
                        <li>ATK:40</li>
                        <li>DEF:60</li>
                    </ul>
                </div>
            </div>
            <div class="command">
                <p onclick="soonFail(2)">▷たたかう</p>
                <p onclick="openBattleMagic()">▷まほう</p>
                <p onclick="closeBattle('B2')">▷にげる</p>
            </div>
        </div>
        
        
        <div id="B3" class="battle" style="display: none" onclick="fail()">
            <img class="back_image_fit" src='images/background/%E7%A5%AD%E5%A3%87_%E6%88%A6%E9%97%98%E7%94%BB%E9%9D%A2.webp'/>
            <div class="enemy_info">
                <div class="enemy_name" id="B3_name" onclick="changeName('B3')">魔王Mr.魔王</div>
                <div class="enemy_status">
                    <ul style="list-style-type: none;">
                        <li>Lv:50000</li>
                        <li>HP:100000</li>
                        <li>ATK:100000</li>
                        <li>DEF:30000</li>
                    </ul>
                </div>
            </div>
            <img src="images/mobs/%E9%AD%94%E7%8E%8B.webp" class="monster" id="monster3" onclick="">
            <div class="command">
                <p onclick="soonFail(3)">▷たたかう</p>
                <p onclick="openBattleMagic()">▷まほう</p>
                <p onclick="closeBattle('B3')">▷にげる</p>
            </div>
        </div>
        
        <div id="failed" style="display: none;">
            <p id="failed_paragraph">効いていないようだ</p>
        </div>
        
        <div id="battle_magic" class="battle command" style="display: none;">
            <p id="magic1" class="change_color" onclick="selectBattleMagic(1)" style="display: none">▷カラー</p>
            <p id="magic2" class="change_char" onclick="selectBattleMagic(2)" style="display: none">▷文字トランス</p>
            <p id="magic3" class="scissors" onclick="selectBattleMagic(3)" style="display: none">▷ハサミ</p>
            <p id="magic4" class="add_char" onclick="selectBattleMagic(4)" style="display: none">▷スクエア</p>
            <div id="magic1_explain" class="explain" style="display: none;">
                <p>色を変えます</p>
                <p onclick="choiceBattleMagic1()">▷使う</p>
                <p onclick="closeBattleMagicExplain(1)">▷やめる</p>
                <div id="magic1_colorchoice" style="display: none;">
                    <p>どの色にする？</p>
                    <p class="red" onclick="useBattleMagic('magic1R')">▷赤</p>
                    <p class="green" onclick="useBattleMagic('magic1G')">▷黄</p>
                    <p class="blue" onclick="useBattleMagic('magic1B')">▷青</p>
                    <p onclick="closeBattleChoice()">▷やめる</p>
                </div>
            </div>
            
            <div id="magic2_explain" class="explain" style="display: none;">
                <p>文字を変えます</p>
                <p onclick="useBattleMagic('magic2')">▷使う</p>
                <p onclick="closeBattleMagicExplain(2)">▷やめる</p>
            </div>
        
            <div id="magic3_explain" class="explain" style="display: none;">
                <p>切ります</p>
                <p onclick="useBattleMagic('magic3')">▷使う</p>
                <p onclick="closeBattleMagicExplain(3)">▷やめる</p>
            </div>

            <div id="magic4_explain" class="explain" style="display: none;">
                <p>□を足します</p>
                <p onclick="useBattleMagic('magic4')">▷使う</p>
                <p onclick="closeBattleMagicExplain(4)">▷やめる</p>
            </div>

            <p onclick="closeBattleMagic()">▷閉じる</p>
            <div id="using_magic" style="display: none;">
                <p>どこに使う？<br>使う場所を選択してください</p>
                <p onclick="stopBattleUsing()">▷やめる</p>
            </div>
            <div id="victory" style="display: none;">
                <p id="runaway" style="display: none;">逃げだした！
                    <!-- <br>経験値を440pt手に入れた！ -->
                </p>
                <p id="fall" style="display: none;">落ちていった！
                    <!-- <br>経験値を4930pt手に入れた！ -->
                </p>
                <p onclick="finishBattle()">▷確認</p>
            </div>
        </div>
        <div id="blackout" style="display: none;"></div>
    </body>
</html>